<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2022-12-04">

<title>DSML - Related - Arquitecture</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./mlplatforms-databricks-workloads-warehousing.html" rel="next">
<link href="./mlplatforms-databricks.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Arquitecture</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">DSML - Related</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://twitter.com" title="" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00-how-to-use-this-site.html" class="sidebar-item-text sidebar-link">How to use this site</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">AWS</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">IAM</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam.html" class="sidebar-item-text sidebar-link">Identity and Access Management (IAM)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-auth.html" class="sidebar-item-text sidebar-link">What can we use to authenticate to AWS?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-sts.html" class="sidebar-item-text sidebar-link">Security Token Service (STS)</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-sign-in-link.html" class="sidebar-item-text sidebar-link">Sign-in Link</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-billing-alarm.html" class="sidebar-item-text sidebar-link">Setting Billing Alarm</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-creating-users.html" class="sidebar-item-text sidebar-link">Create IAM Users</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-iam-pass-policy.html" class="sidebar-item-text sidebar-link">Setting Password Policy</a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Infrastructure</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-infra.html" class="sidebar-item-text sidebar-link">Global Infrastructure</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./aws-infra-vpc.html" class="sidebar-item-text sidebar-link">Virtual Private Cloud (VPC)</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Production-Ready Development</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready.html" class="sidebar-item-text sidebar-link">Less Theory More Application</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">Machine Learning Projects</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready-planning.html" class="sidebar-item-text sidebar-link">Effective Project Planning</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready-mvp.html" class="sidebar-item-text sidebar-link">Build Minimum Viable Products</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready-ffp.html" class="sidebar-item-text sidebar-link">Build Fully Featured Products</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready-deploy-maintenance.html" class="sidebar-item-text sidebar-link">Deployment and Maintenance</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./production-ready-evaluation.html" class="sidebar-item-text sidebar-link">Project Evaluation</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">Environments</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./venv-conda.html" class="sidebar-item-text sidebar-link">Setting up virtual environments with conda</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">Data Engineering</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deng.html" class="sidebar-item-text sidebar-link">Why Data Engineering is so important?</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deng-data-collection-html.html" class="sidebar-item-text sidebar-link">Collecting HTML Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deng-data-collection-json.html" class="sidebar-item-text sidebar-link">Collecting JSON Data</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./deng-data-cleaning.html" class="sidebar-item-text sidebar-link">Cleaning Data</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">Machine Learning Science</span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">Machine Learning Platforms</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">Databricks</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlplatforms-databricks.html" class="sidebar-item-text sidebar-link">Data Lakehouse</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlplatforms-databricks-arquitecture.html" class="sidebar-item-text sidebar-link active">Arquitecture</a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">Workloads</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlplatforms-databricks-workloads-warehousing.html" class="sidebar-item-text sidebar-link">Data Warehousing</a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Arquitecture</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">December 4, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Here we describe the main aspects of the arquitecture behind the Databricks Lakehouse Platform. We start by showing how <strong>Delta Lake</strong> solves many issues related to data reliability and how <strong>Photon</strong> improves the performance of DBLP. Then, we explain how DBLP solves many challenges of data governance and security with <strong>Unity Catalog</strong>, <strong>Delta Sharing</strong>, and the divided arquitecture into two planes: <strong>Control Plane</strong> and <strong>Data Plane</strong>.</p>
<section id="data-reliability-and-performance" class="level2">
<h2 class="anchored" data-anchor-id="data-reliability-and-performance">Data Reliability and Performance</h2>
<p>Data needs to be reliable and clean since it’s the source for business insights. While data lakes are a great solution for holding large quantities of raw data, they lack important features for data reliability and quality (<em>data swamps</em>). Also, data lakes don’t often offer as good of performance as that of data warehouses.</p>
<p>Problems with standard data lakes related to data reliability</p>
<ul>
<li>Lack of Atomicity, Consistency, Isolation, Durability (ACID) transaction support. It makes it impossible to mix updates, appends and reads.</li>
<li>Lack of schema enforcement. It creates inconsistent and low quality data.</li>
<li>Lack of integration with a data catalog. It doesn’t create a single source of truth.</li>
</ul>
<p>Problems with data lakes related to performance</p>
<ul>
<li>Data is mostly kept in immutable files.</li>
<li>Ineffective partitioning. Partitioning tends to be ineffective if the wrong field is selected for partitioning or due to high cardinality columns.</li>
<li>Too many small files. Appending new data takes the shape of simply adding new files, usually small. It is a known root of query performance degradation.</li>
</ul>
<section id="delta-lake" class="level3">
<h3 class="anchored" data-anchor-id="delta-lake">Delta Lake</h3>
<p>Delta Lake is a file-based open source storage format that runs on top of existing cloud data lakes. It is compatible with Apache Spark and uses Delta Tables which are based on Apache Parquet. Delta Tables provides versioning, reliability, metadata management, and time travel capabilities making all data types manageable.</p>
<p>Delta Lake offers</p>
<ul>
<li>Guarantees for ACID transactions. No partial or corrupted files.</li>
<li>Scalable data and metadata handling. Spark scales out all the metadata processing.</li>
<li>Audit history and time travel. It provides a transaction log with details about every change to data, which allows us to revert to earlier versions for rollback or to reproduce experiments. It makes it possible multi-user work and it creates a single source of truth.</li>
<li>Schema enforcement and schema evolution.</li>
<li>Support for deletes, updates and merges allowing it to accommodate <em>Change Data Capture</em> (CDC), <em>Slowly Changing Dimension</em> (SCD) operations, and streaming upserts.</li>
<li>Unified streaming and batch data processing allowing us to work with a wide variety of data latencies.</li>
</ul>
<p>When users read a Delta Lake table for the first time or run a new query on an open table, Spark checks the transaction log for new transactions that have been posted to the table. If a change exists, Spark updates the table. This ensures users are working with the most up-to-date information and the user table is synchronized with the master record.</p>
</section>
<section id="photon" class="level3">
<h3 class="anchored" data-anchor-id="photon">Photon</h3>
<p>The DBLP arquitecture can pose challenges to the query execution engine for accessing and processing data, so the execution engine has to provide the same performance as a data warehouse, while still having the scalability of a data lake. Photon provides this.</p>
<p>Photon is the next generation query engine and</p>
<ul>
<li>provides dramatic infrastructure cost savings.</li>
<li>is compatible with Spark APIs, implementing a more general execution framework for efficient processing of data.</li>
<li>we see increased speed for use cases such as data ingestion, ETL, streaming, data science, and interactive queries as well as SQL-based jobs and IoT.</li>
</ul>
<p>Photon is compatible with the Apache Spark Dataframes SQL APIs to allow workloads to run without having to make any code changes. It coordinates work and resources <em>transparently</em>, accelerating <em>portions</em> of SQL and Spark queries without tuning or user intervention.</p>
</section>
</section>
<section id="unified-governance-and-security" class="level2">
<h2 class="anchored" data-anchor-id="unified-governance-and-security">Unified Governance and Security</h2>
<p>The more individual access points added to a system such as users, groups or external connectors, the higher the risk of data breaches along any of those lines.</p>
<p>Challenges to data and AI governance</p>
<ul>
<li>Diversity of data and AI assets. Data takes many forms beyond files and tables to complex structures such as dashboards, machine learning models, videos or images.</li>
<li>Disparate and incompatible data platforms. Data warehouses for BI and data lakes for AI, resulting in data duplication and unsynchronized governance models.</li>
<li>Rise of multi-cloud adoption. Each cloud has a unique governance model.</li>
<li>Fragmented tool usage for data governance. It introduces complexity and multiple integration points in the system, leading to poor performance.</li>
</ul>
<p>DBLP provides solutions for these challenges.</p>
<section id="unity-catalog" class="level3">
<h3 class="anchored" data-anchor-id="unity-catalog">Unity Catalog</h3>
<p>A unified governance solution for all data assets. It provides a common governance model based on ANSI SQL to define and enforce fine-grained access control on all data and AI assets on any cloud. This enables better native performance, management, and security across clouds.</p>
<ul>
<li>The common metatada layer for cross-workspace metadata is at the account level. It provides a single access point with a common interface for collaboration from any workspace in the platform, removing data team silos.</li>
<li>Unity Catalog allows us to restrict access to certain rows and columns to users or groups authorized to query them.</li>
<li>With attribute based access control, we can further simplify governance at scale by controlling access to multiple data items at one time.</li>
<li>Unity Catalog provides a highly detailed audit trail logging who has performed what action against the data</li>
<li>Unity Calotog has an user interface for data search and discovery, so this way it breaks down data silos and democratized data across the organization.</li>
<li>The low latency metadata serving and auto tuning of tables enables Unity Catalog to provide 38 times faster metadata processing compared to Hive metastore.</li>
<li>All the transformations and refinements of data is encompassed in <strong>data lineage</strong>. All of the interactions with data, including where it came from , what other datasets it might have been combined with, who created it and when, what transformations were performed, and other events and attributes are included in a dataset’s data lineage.</li>
</ul>
</section>
<section id="delta-sharing" class="level3">
<h3 class="anchored" data-anchor-id="delta-sharing">Delta Sharing</h3>
<p>An open solution to securely <em>share live data</em> to any computing platform.</p>
<p>Benefits</p>
<ul>
<li>Open cross-platform sharing, allowing us to share existing data in Delta Lake and Apache Parquet formats without having to establish new ingestion processes to consume data since it provides native integration with many tools.</li>
<li>Data is shared live without copying it, with data being maintained and governed on the provider’s data lake. This ensures the datasets are reliable in real-time and provide the most current information to the data recipient. Recipients dont have to be on the same cloud or even use the DBLP.</li>
<li>It provides centralized administration and governance to the data provider as the data is governed, tracked, and audited from a single location.</li>
<li>It is safe and secure with privacy-safe data clean rooms. This means collaboration between data providers and recipients is hosted in a secure environment while safeguarding data privacy.</li>
<li>It is a REST protocol that securely shares access to part of a cloud dataset.</li>
</ul>
</section>
<section id="divided-security-arquitecture" class="level3">
<h3 class="anchored" data-anchor-id="divided-security-arquitecture">Divided Security Arquitecture</h3>
<p>DBLP provides security by dividing the arquitecture into two separate planes: the control plane and the data plane.</p>
<section id="control-plane" class="level4">
<h4 class="anchored" data-anchor-id="control-plane">Control Plane</h4>
<p>It consists of the managed backend services that Databricks provides. This lives in Databricks’ own cloud account and are aligned with whatever cloud service the customer is using. Here Databricks runs the workspace application and manages notebook, logs, configuration, user information and clusters.</p>
</section>
<section id="data-plane" class="level4">
<h4 class="anchored" data-anchor-id="data-plane">Data Plane</h4>
<p>It is where the data is processed by clusters of compute resources (known as <em>classic data plane</em>). Unless we choose to use Serverless Compute, the compute resources in the data plane run inside the business owner’s own cloud account.</p>
<section id="security-of-the-data-plane" class="level5">
<h5 class="anchored" data-anchor-id="security-of-the-data-plane">Security of the Data Plane</h5>
<p>Security key points: Networking, Servers, Databricks.</p>
<ul>
<li><strong><em>For the networking of the environment</em></strong>, if the business decides to host the data plane, Databricks will configure the networking by default. The serverless data plane networking infrastructure is managed by Databricks in a Databricks cloud service provider account and shared among customers with additional network boundaries between workspaces and clusters.</li>
<li><strong><em>For servers</em></strong>, Databricks’ clusters are run using the lastest hardened system images. Databricks’ clusters are typically short-lived, often terminated after a job, and do not persist data after termination. Code is launched in an unprivileged container to maintain system stability. This security design provides protection against persistent attackers and privilege scalation.</li>
<li><strong><em>For Databricks’ support cases</em></strong>, Databricks’ access to the environment is limited to cloud service provider APIs for automation and support access. Databricks has a custom-built system, allowing their staff access to fix issues or handle support requests, and it requires either a support ticket or an engineering ticket tied expressly to our workspace. Access is limited to a specific group of employees for limited periods of time. Besides, with security audit logs, the initial access event and the support team members actions are tracked.</li>
</ul>
</section>
</section>
</section>
<section id="user-identity-and-access" class="level3">
<h3 class="anchored" data-anchor-id="user-identity-and-access">User Identity and Access</h3>
<ul>
<li>Table ACLs feature uses traditional SQL-based statements to manage access to data and enable fine-grained view-based access.</li>
<li>IAM instance profiles enable AWS clusters to assume an IAM Role, so users of that cluster automatically access allowed resources without explicit credentials.</li>
<li>External storage can be mounted in access using a securely stored access key.</li>
<li>Secrets API separates credentials from code when accessing external resources</li>
</ul>
</section>
<section id="data-security" class="level3">
<h3 class="anchored" data-anchor-id="data-security">Data Security</h3>
<p>Databricks provides encryption, isolation, and auditing throughout the governance and security structure. User can also be isolated at different levels such as</p>
<ul>
<li>The workspace level, where each team or department uses a different workspace.</li>
<li>The cluster level, where clusters ACLs can restrict users who attach notebooks to a given cluster. For high concurrency clusters, process isolation, JVM white listings and language limitations can be used for safe coexistence of users with different access levels. Single user clusters, if permitted, allow users to create a private dedicated cluster.</li>
</ul>
<p>Databricks encryption capabilities are in place both at rest and in motion</p>
<ul>
<li>For data-at-rest encryption
<ul>
<li>Control plane is encrypted.</li>
<li>Data plane supports local encryption.</li>
<li>Customers can use encrypted storage buckets.</li>
<li>Customers at some tiers can configure customer-managed keys for managed services.</li>
</ul></li>
<li>For data-in-motion encryption
<ul>
<li>Communication between control plane and data plane is encrypted.</li>
<li>Offers optional intra-cluster encryption.</li>
<li>Customer code can be written to avoid unencrypted services (e.g., FTP)</li>
</ul></li>
</ul>
</section>
<section id="compliance" class="level3">
<h3 class="anchored" data-anchor-id="compliance">Compliance</h3>
<ul>
<li>SOC 2 Type II</li>
<li>ISO 27001</li>
<li>ISO 27017</li>
<li>ISO 27018</li>
<li>FedRAMP High</li>
<li>HITRUST</li>
<li>HiPAA</li>
<li>PCI</li>
<li>GDPR and CCPA ready</li>
</ul>
</section>
</section>
<section id="instant-compute-and-serverless" class="level2">
<h2 class="anchored" data-anchor-id="instant-compute-and-serverless">Instant Compute and Serverless</h2>
<p>With the classic data plane, compute resources are run in the business’s cloud storage account, and clusters perform distributed data analysis using queries in the Databricks SQL workspace or notebooks in the data science and engineering or Databricks machine learning environments.</p>
<p>Challenges of classic data plane:</p>
<ul>
<li>Creating clusters is a complicated task. Choosing the correct size, instance type, and configuration for the cluster can be overwhelming.</li>
<li>Environment startup is slow after making the multitude of choices to configure and provision the cluster.</li>
<li>Costly behaviors, such as leaving clusters running for longer than necessary to avoid startup times and over provisiong of resources to ensure the cluster can handle spikes and data processing needs.</li>
</ul>
<section id="serverless-data-plane" class="level3">
<h3 class="anchored" data-anchor-id="serverless-data-plane">Serverless Data Plane</h3>
<p>Serverless Compute is a fully managed service that Databricks provisions and manages the compute resources for a business in the Databricks Cloud account instead of the business.</p>
<ul>
<li>The environment starts immediately.</li>
<li>It is elastic so it scales up and down within seconds.</li>
<li>Clusters are available on-demand, and when finished, the resources are release back to Databricks.</li>
<li>Total cost of ownership decreases on average between 20-40%.</li>
<li>Admin overhead is eliminated.</li>
</ul>
<p>At the heart of Serverless Compute is a fleet of database clusters that are always running unassigned to any customer, waiting in a warm state, ready to be assigned within seconds. It has three layers of isolation</p>
<ul>
<li>The container hosting the runtime</li>
<li>The virtual machine, hosting the container</li>
<li>Virtual network for the workspace.</li>
</ul>
<p>Each part is isolated with no sharing or cross-network traffic allowed, ensuring our work is secure.</p>
</section>
</section>
<section id="data-management-terminology" class="level2">
<h2 class="anchored" data-anchor-id="data-management-terminology">Data Management Terminology</h2>
<section id="metastore" class="level3">
<h3 class="anchored" data-anchor-id="metastore">Metastore</h3>
<p>It is the top-level logical container in Unity Catalog. It’s a construct that represents the metadata. Metadata is the information about the data objects being managed by the metastore.</p>
</section>
<section id="catalog" class="level3">
<h3 class="anchored" data-anchor-id="catalog">Catalog</h3>
<p>The next thing in the data object hierarchy is the catalog. It is the top-most container for data objects in Unity Catalog. A metastore can have as many catalogs as desired.</p>
<p>The catalog forms the first part of the three-level namespace that data analysts use to reference data objects in Unity Catalog.</p>
<pre class="{sql}"><code>SELECT * 
FROM catalog.schema.table</code></pre>
</section>
<section id="schema" class="level3">
<h3 class="anchored" data-anchor-id="schema">Schema</h3>
<p>It acts as a container for data assets like tables and views, and is the second part of the three-level namespace. Catalogs may contain many schemas as desired.</p>
</section>
<section id="table" class="level3">
<h3 class="anchored" data-anchor-id="table">Table</h3>
<p>SQL relations consisting of an ordered list of columns. Tables have two distinct elements: the metadata such as comments, tags, list of columns, associated data types, etc; and the data that populates the rows of the table. There are two types of table: managed table and external table</p>
</section>
<section id="views" class="level3">
<h3 class="anchored" data-anchor-id="views">Views</h3>
<p>They are stored queries executed when you query the view. They perform arbitrary SQL transformations on tables and other views. They are read-only.</p>
</section>
<section id="user-defined-functions" class="level3">
<h3 class="anchored" data-anchor-id="user-defined-functions">User-defined functions</h3>
<p>Custom functionality that can be invoke within queries.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-page-right">
  <div class="nav-page nav-page-previous">
      <a href="./mlplatforms-databricks.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Data Lakehouse</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./mlplatforms-databricks-workloads-warehousing.html" class="pagination-link">
        <span class="nav-page-text">Data Warehousing</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>